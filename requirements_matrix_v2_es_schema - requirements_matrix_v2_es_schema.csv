ID,Área,Funcionalidad,Requisito_detallado,Prioridad,Roles,Pantallas_UI,Entidades_dominio,Tablas_DB_sugeridas,Storage_sugerido,API_sugerida,Integraciones,Reglas_validación,Auditoría_bitácora,Notificaciones,Pruebas_sugeridas,Criterios_aceptación,Dependencias,Estatus,Versión_objetivo,Owner
RM-001,Ingesta,Registro de brokers,"El sistema deberá permitir cargar y administrar una lista configurable de N brokers con 1..N URLs de perfil por broker y metadatos (broker_id, nombre, región, etiquetas/estrategia). Debe soportar importación masiva (CSV) y edición incremental.",Alta (P0),Admin; Sistema,Admin > Brokers (lista); Admin > Broker (detalle/URLs),Broker; BrokerProfileUrl; Tag,brokers; broker_profile_urls; broker_tags,—,POST/GET/PUT/DELETE /brokers; POST/GET/PUT/DELETE /brokers/{id}/urls; POST /brokers/import,—,URLs únicas por broker; broker_id obligatorio; normalización de URLs; deduplicación; validación de formato.,"broker_created; broker_updated; broker_deleted; urls_imported (actor, timestamp, diff)",—,Unit: validadores; Integration: import CSV; E2E: CRUD desde UI,Se pueden crear/editar/eliminar brokers; import masivo funciona; se detectan duplicados; se rechazan URLs inválidas con motivo legible.,—,BACKLOG,MVP v0.1,Backend
RM-002,Ingesta,Validación de URL,"Antes de ejecutar extracción, el sistema deberá validar cada URL (sintaxis, esquema, dominio permitido, alcanzabilidad HTTP/DNS) y persistir el resultado con código de error y política de reintento.",Alta (P0),Sistema; Admin,Admin > Broker (estado de URLs),UrlValidationResult; BrokerProfileUrl,"broker_profile_urls (status,last_checked,error_code,error_detail); url_validation_events",—,POST /urls/validate; GET /brokers/{id}/urls,Job queue/worker (p.ej. Redis Queue/Celery/Sidekiq); Scheduler (cron); Observabilidad (logs+metrics),Regex URL; http/https; timeout; follow redirects (configurable); max_retries; backoff.,url_validated; url_invalidated; retries_exhausted,Alertas opcionales cuando >X% URLs fallan (email/webhook),Unit: parser URL; Integration: validación real con mocks; Contract: códigos de error estables,>=99% URLs alcanzables quedan en estado VALID; las no alcanzables quedan FAIL con error_code; reintentos respetan política configurada.,RM-001,BACKLOG,MVP v0.1,Backend
RM-003,Ingesta,Políticas de acceso por dominio (robots/ToS),"El sistema deberá registrar políticas por dominio (robots.txt snapshot, rate limit, notas ToS internas) y hacer cumplir dichas políticas durante la extracción. Debe permitir bloquear dominios o pausar scraping.",Media (P1),Admin; DevOps; Sistema,Admin > Dominios/Políticas,DomainPolicy; Domain,domains; domain_policies; robots_snapshots,Object storage: robots_snapshots/,GET/PUT /domains/{domain}/policy; POST /domains/{domain}/block,Fetcher robots.txt; Config store; Worker,Si dominio=blocked => no se ejecutan jobs; rate_limit aplicado; user-agent configurable; registro de snapshot.,domain_policy_updated; domain_blocked; crawl_blocked_by_policy,Notificación a Admin cuando dominio pasa a BLOCKED o circuit breaker se activa,Integration: enforcement rate limit; Unit: policy evaluation,El sistema no excede límites configurados por dominio; dominios bloqueados no se procesan; auditoría muestra política aplicada en cada request.,"RM-001,RM-002",BACKLOG,v0.2,Backend/DevOps
RM-004,Ingesta,Scheduler de crawls,"El sistema deberá soportar ejecución programada (horario configurable por proyecto y/o por broker) y refresh on-demand por broker, generando jobs con trazabilidad (run_id, broker_id, created_by).",Alta (P0),Admin; Analista; Sistema,Dashboard > Brokers (botón refrescar); Admin > Scheduler,CrawlJob; Run; Broker,crawl_jobs; runs,—,POST /brokers/{id}/refresh; POST/PUT /schedules; GET /runs,Job queue/worker (p.ej. Redis Queue/Celery/Sidekiq); Scheduler (cron); Observabilidad (logs+metrics),"No permitir dos crawls simultáneos por (broker, source) salvo configuración; ventana de ejecución; idempotencia por run_id.",run_created; crawl_job_enqueued; crawl_job_started; crawl_job_finished,Notificación opcional al finalizar runs (webhook),Integration: cola + scheduler; E2E: refresh manual desde UI,Los jobs corren dentro de ±5 min del schedule; refresh manual inicia <30s; se muestra last_run por broker.,RM-001,BACKLOG,MVP v0.1,Backend/DevOps
RM-005,Ingesta,"Rate limiting, retries y circuit breaker","El sistema deberá implementar rate limiting por dominio, retries con exponential backoff y circuit breaker ante fallas repetidas. Debe registrar métricas de requests y errores.",Alta (P0),Sistema; DevOps,—,HttpRequestEvent; DomainPolicy,http_request_events; circuit_breakers,—,— (interno worker),Job queue/worker (p.ej. Redis Queue/Celery/Sidekiq); Scheduler (cron); Observabilidad (logs+metrics),RPS <= policy; max_retries; jitter; circuit_open_threshold; cool_down_time.,http_request_logged; circuit_opened; circuit_closed,Alerta DevOps cuando circuit_opened por dominio crítico,Unit: backoff; Integration: rate-limit; Load test: no exceder RPS,No se excede RPS configurado; retries se detienen al máximo; circuit breaker corta tráfico y se recupera tras cool down.,RM-003,BACKLOG,MVP v0.1,Backend/DevOps
RM-006,Extracción,Parser HTML por dominio,"El sistema deberá extraer datos crudos desde HTML usando adaptadores por dominio (selectores/mapeos) mantenibles y testeables, versionando el parser.",Alta (P0),Sistema; Backend,—,SourceAdapter; RawRecord,source_adapters; raw_records,Object storage: raw_html/ (opcional); raw_json/,— (interno),Job queue/worker (p.ej. Redis Queue/Celery/Sidekiq); Scheduler (cron); Observabilidad (logs+metrics),Parser_version obligatorio; si falla => estado PARSER_ERROR con evidencia; soportar cambios de markup.,raw_record_created; parser_failed,—,Unit: parsing fixtures; Integration: adapter pipeline; Golden tests,"Para dominios soportados, los campos mínimos se extraen con >=95% completitud sobre set de prueba; parser_version queda registrado.","RM-004,RM-005",BACKLOG,MVP v0.1,Backend
RM-007,Extracción,Soporte JSON/API cuando exista,"Si el perfil expone datos vía JSON/API (directo o embebido), el adaptador deberá preferir esa fuente por estabilidad y registrar el endpoint utilizado.",Media (P1),Sistema; Backend,—,SourceAdapter; RawRecord,"raw_records (source_type, endpoint_used)",Object storage: raw_json/,— (interno),HTTP client; Auth si aplica (token),Validación de schema JSON; fallback a HTML si JSON falla (configurable).,raw_record_created; json_schema_mismatch,—,Unit: schema; Integration: preferencia de fuente,"Cuando existe JSON, se usa por defecto y reduce errores de parsing; se guarda endpoint_used y schema_version.",RM-006,BACKLOG,v0.2,Backend
RM-008,Extracción,Descarga de adjuntos relevantes,"El sistema deberá detectar y descargar adjuntos/links (PDF u otros permitidos) asociados al perfil cuando estén presentes y permitidos por política, guardando checksum y metadatos.",Baja (P2),Sistema; Backend,Broker > Evidencias/Docs (opcional),Attachment; DocumentRef,attachments; attachment_links,Object storage: attachments/ (con límites de tamaño),GET /brokers/{id}/attachments; POST /attachments/reprocess,Object storage; Antivirus scanning (opcional),Allowlist de tipos; size_limit; checksum; no duplicar por hash.,attachment_downloaded; attachment_failed; attachment_deleted,Notificación si adjunto crítico falla (configurable),Integration: descarga + storage; Unit: allowlist; Security: path traversal,Adjuntos permitidos se almacenan y referencian; checksum y metadatos disponibles; se respetan límites y políticas.,"RM-003,RM-006",BACKLOG,v0.3,Backend
RM-009,Modelo de datos,Almacenamiento de datos crudos versionados,"El sistema deberá guardar registros crudos inmutables con URL fuente, timestamp, parser_version, content_hash y payload (JSON). No debe sobrescribir datos crudos.",Alta (P0),Sistema; Backend,—,RawRecord; CrawlJob; Run,raw_records; crawl_jobs; runs,Object storage (opcional): raw_html/ raw_json/,GET /raw-records?broker_id=...; GET /raw-records/{id},Job queue/worker (p.ej. Redis Queue/Celery/Sidekiq); Scheduler (cron); Observabilidad (logs+metrics),Inmutabilidad; hash cambia si cambia contenido; FK a run_id; tamaño máximo por registro.,raw_record_created; raw_record_accessed,—,Unit: hashing; Integration: persistencia; Contract: schema raw_records,Cada crawl genera 1..N raw_records inmutables; parser_version y hash registrados; se puede recuperar por run_id.,RM-006,BACKLOG,MVP v0.1,Backend
RM-010,Modelo de datos,Entidades normalizadas y snapshots,"El sistema deberá normalizar datos crudos a entidades núcleo (Broker, ProfileSnapshot, MetricDefinition, MetricValue, Run, Experiment) y soportar snapshots temporalmente indexados.",Alta (P0),Backend; Quant; Sistema,—,Broker; ProfileSnapshot; MetricDefinition; MetricValue; Run; Experiment,brokers; profile_snapshots; metric_definitions; metric_values; experiments; runs,—,GET /brokers/{id}/snapshots; GET /metrics/definitions,DB relacional + migraciones,Integridad referencial; snapshot_time obligatorio; idempotencia al re-procesar mismo raw_record.,snapshot_created; normalization_failed,—,Integration: raw->normalized; Unit: mappers; Migration tests,Snapshots se crean correctamente por run; queries retornan consistencia; FK válidas; re-procesamiento no duplica indebidamente.,RM-009,BACKLOG,MVP v0.1,Backend
RM-011,Transformación,Reglas de mapeo configurables,"El sistema deberá permitir definir reglas de mapeo (por dominio) desde campos crudos a campos normalizados, con versionado y capacidad de rollback. Idealmente sin despliegue de código para cambios menores.",Alta (P0),Admin; Backend; Quant,Admin > Mappings (opcional),MappingRuleSet; SourceAdapter,mapping_rule_sets; mapping_rule_versions,—,GET/PUT /mappings/{domain}; POST /mappings/{domain}/publish,Config store (GitOps opcional),Validación de mapeo contra schema; no permitir publicar reglas incompletas; version increment.,mapping_published; mapping_rolled_back,Notificación a Analistas al publicar cambios de mapeo (opcional),Unit: validator; Integration: apply mapping; Regression fixtures,Mapeos se aplican en pipeline; cambios quedan auditados y versionados; se puede volver a versión anterior.,RM-010,BACKLOG,MVP v0.1,Backend
RM-012,Transformación,Limpieza y estandarización de datos,"El sistema deberá limpiar y estandarizar formatos (fechas, divisas, porcentajes, locales) a formatos canónicos y registrar errores de parseo por campo.",Alta (P0),Backend; Sistema,—,CanonicalValue; ParseError,parse_errors; profile_snapshots (campos tipados),—,— (interno),Locale inference (opcional),Typing estricto; currency_code ISO; fechas a ISO-8601; % a decimal; registrar parse_errors con evidencia.,parse_error_logged; canonicalization_applied,—,Unit: parsers; Integration: pipeline; Property-based tests para formatos,Campos numéricos quedan tipados; parsing soporta formatos comunes; errores quedan registrados y visibles para troubleshooting.,RM-011,BACKLOG,MVP v0.1,Backend
RM-013,Métricas,Catálogo de definiciones de métricas,"El sistema deberá mantener un registro versionado de métricas (nombre, fórmula/algoritmo, insumos requeridos, unidad, rango válido, y constraints). Será la fuente única para cómputo y reporteo.",Alta (P0),Quant; Backend; Admin,Admin > Métricas (catálogo),MetricDefinition; MetricConstraint,metric_definitions; metric_definition_versions; metric_constraints,—,GET/POST/PUT /metrics/definitions; POST /metrics/definitions/{id}/publish,—,No permitir publicar métrica sin insumos; validar unidades; constraints evaluables.,metric_definition_published; metric_definition_changed,Notificación a Analistas si cambia una métrica usada en reportes (opcional),Unit: constraints; Integration: compute using definitions; Contract: schema defs,Cada métrica calculada referencia una definición; definiciones son versionadas y visibles; constraints se evalúan y registran.,RM-010,BACKLOG,MVP v0.1,Backend/Quant
RM-014,Métricas,Cálculo de métricas core,"El sistema deberá calcular métricas base por broker y por periodo (p.ej. rendimiento, volatilidad, drawdown, win-rate) a partir de los datos disponibles, y manejar explícitamente el caso de 'datos insuficientes'.",Alta (P0),Quant; Sistema,Dashboard > Broker (charts),MetricValue; ProfileSnapshot,metric_values; metric_calculation_jobs,—,GET /brokers/{id}/metrics?from=...&to=...,Frontend SPA; API REST/GraphQL,Si faltan insumos => status=INSUFFICIENT_DATA; ventanas temporales consistentes; no mezclar fuentes incompatibles.,metric_calculated; metric_missing_inputs,—,Unit: fórmulas; Integration: time series; Regression: fixtures,Métricas core se calculan para brokers con insumos; se generan series temporales; 'INSUFFICIENT_DATA' es trazable y consistente.,RM-013,BACKLOG,MVP v0.1,Quant
RM-015,Métricas,Métricas de costos/fees,"El sistema deberá calcular métricas relacionadas a costos/fees/spread cuando existan, documentando supuestos y anexándolos a reportes y exportaciones.",Media (P1),Quant; Analista,Dashboard > Broker (costos); Reporte (metodología),MetricValue; Assumption,metric_values; metric_assumptions,—,GET /brokers/{id}/metrics/costs; GET /reports/{id},—,Supuestos obligatorios por métrica; rangos plausibles; unidad consistente.,metric_assumption_recorded,—,Unit: cálculo; Review: supuestos; Integration: report includes assumptions,"Las métricas de costos incluyen supuestos visibles; resultados reproducibles; si faltan datos, se marca insuficiente.",RM-013,BACKLOG,v0.2,Quant
RM-016,Métricas,Flags de riesgo/compliance basados en reglas,"El sistema deberá evaluar reglas determinísticas para generar banderas (p.ej. disclosures faltantes, claims anómalos) y adjuntar evidencia (campo crudo + snapshot) para cada flag.",Baja (P2),Quant; Analista; Admin,Dashboard > Broker (riesgos/flags),RiskFlag; Rule,risk_rules; risk_flags; risk_flag_evidence,—,GET /brokers/{id}/flags; GET /rules/risk,Rules engine (simple),Reglas versionadas; cada flag incluye rule_id y evidencia; severidad limitada a catálogo.,risk_flag_created; risk_rule_published,Notificación opcional cuando aparece flag crítico,Unit: rules; Integration: evidence links,Las banderas son reproducibles; cada flag incluye evidencia consultable; reglas se pueden versionar y auditar.,"RM-013,RM-020",BACKLOG,v0.3,Quant/Backend
RM-017,Métricas,"Benchmarks, percentiles y rankings","El sistema deberá generar agregados cross-broker (percentiles, rankings, peer groups) con definiciones versionadas de peer group y desempate determinístico.",Alta (P0),Analista; Viewer,Dashboard > Rankings; Dashboard > Comparar,Benchmark; PeerGroup,benchmarks; peer_groups; peer_group_rules; ranking_snapshots,—,GET /benchmarks; GET /rankings?metric=...,Frontend SPA; API REST/GraphQL,Peer group definido y versionado; ties -> orden por broker_id; reproducibilidad.,benchmark_computed; peer_group_published,—,Unit: ranking; Integration: aggregation queries; Performance tests,Rankings reproducibles; peer groups visibles; se puede filtrar y exportar; no hay inconsistencias entre UI y export.,RM-014,BACKLOG,MVP v0.1,Quant
RM-018,Calidad de datos,Score de completitud,"El sistema deberá calcular un score de completitud por broker y por métrica en [0,1], basado en disponibilidad de insumos y cobertura temporal. Debe mostrarse en dashboard y reportes.",Alta (P0),Analista; Viewer,Dashboard > Brokers (columna completitud); Dashboard > Broker,CompletenessScore,completeness_scores; metric_input_graph,—,GET /brokers/{id}/completeness; GET /completeness/summary,—,Score definido por reglas y versionado; no ocultar datos faltantes; explainability (por insumo faltante).,completeness_computed,—,Unit: rules; Integration: UI display; Snapshot tests,El score coincide con reglas; UI muestra score y explicación; reportes lo incluyen por broker.,"RM-013,RM-014",BACKLOG,MVP v0.1,Backend/Quant
RM-019,Calidad de datos,Detección de anomalías,"El sistema deberá detectar anomalías (saltos bruscos de métricas, huecos temporales, cambios de parser/mapping) y etiquetar resultados afectados; debe permitir filtrar anomalías en validación del algoritmo.",Media (P1),Analista; Quant; DevOps,Dashboard > Anomalías; Run Explorer (filtros),AnomalyEvent; AnomalyTag,anomaly_events; anomaly_tags,—,GET /anomalies; GET /runs/{id}?include_anomalies=true,—,"Umbrales configurables; registrar evidencia (series, punto de cambio); diferenciar data vs parser change.",anomaly_detected; anomaly_acknowledged,Notificación a Analistas/DevOps si anomalía severa,Unit: detection; Integration: filtering; Regression: known anomalies,Anomalías aparecen con evidencia; se pueden excluir en runs; el sistema no mezcla datos 'contaminados' sin avisar.,"RM-014,RM-011,RM-009",BACKLOG,v0.2,Quant/Backend
RM-020,Auditabilidad,Lineage de métricas a raw data,"El sistema deberá proveer trazabilidad desde cualquier valor de métrica/ranking/reporte hasta los raw_records y transformaciones usadas (parser_version, mapping_version, metric_definition_version).",Alta (P0),Analista; Admin,Dashboard > Drill-down/Lineage; Reporte > Appendix,LineageLink; EvidencePointer,lineage_links; lineage_evidence,—,GET /metrics/{metric_value_id}/lineage; GET /reports/{id}/lineage,—,Cada cálculo genera links; links no se pierden al re-procesar; permisos respetan RBAC.,lineage_created; lineage_accessed,—,Integration: drill-down; Unit: lineage builder,Desde UI/reporte se puede abrir el lineage y ver raw_records asociados; versiones aparecen; auditoría registra accesos.,"RM-009,RM-013",BACKLOG,MVP v0.1,Backend
RM-021,Validación de algoritmo,Contrato de integración del algoritmo,El sistema deberá integrar el algoritmo de optimización del cliente mediante una interfaz definida (CLI/API/librería) con versionado (algorithm_build_id) y entradas/salidas determinísticas o con tolerancia definida.,Alta (P0),Quant; Backend; DevOps,Run Explorer > Detalle run (inputs/outputs),AlgorithmBuild; AlgorithmRun,algorithm_builds; validation_runs; algorithm_logs,Object storage: algorithm_artifacts/; run_logs/,POST /algorithm/builds; POST /validation-runs,Container runtime (Docker); Artifact registry (opcional),Validar checksum de build; schema de inputs/outputs; timeout; recursos máximos por run.,algorithm_build_registered; validation_run_started; validation_run_finished,Notificación al completar run (opcional),Integration: containerized runner; Unit: I/O schema validator,"Con mismo dataset + build + parámetros, los outputs son reproducibles (o dentro de tolerancia); build_id queda registrado en run.",RM-022,BACKLOG,MVP v0.1,Backend/Quant
RM-022,Validación de algoritmo,Constructor de datasets (feature matrix),"El sistema deberá construir datasets de validación desde datos normalizados (features, targets/labels si aplica) con ventanas temporales explícitas y metadatos (schema_version, broker_set, feature_list).",Alta (P0),Quant; Analista,Run Explorer > Dataset (detalle),DatasetArtifact; FeatureSpec,datasets; dataset_versions; dataset_features,Object storage: datasets/ (csv/parquet),POST /datasets/build; GET /datasets/{id},Object storage; Compute worker,Validación de schema; consistencia temporal; no incluir brokers sin min_data (configurable).,dataset_built; dataset_build_failed,—,Unit: feature builder; Integration: persistence; Contract: dataset schema version,Dataset incluye metadatos completos; se puede re-descargar; se reproduce con mismos parámetros.,RM-010,BACKLOG,MVP v0.1,Quant/Backend
RM-023,Validación de algoritmo,Runner de backtests/experimentos,"El sistema deberá ejecutar runs de validación sobre datasets seleccionados, guardando parámetros, logs, outputs, y métricas de ejecución. Debe soportar tipos de run (train/validate/test) si aplica.",Alta (P0),Quant; Analista,Run Explorer (lista); Run Explorer > Detalle,ValidationRun; Experiment; RunResult,validation_runs; run_results; experiment_params,Object storage: run_outputs/; run_logs/,POST /validation-runs; GET /validation-runs; GET /validation-runs/{id},Queue/worker; Container runtime,Validar parámetros requeridos; evitar duplicados (idempotency key); límites de tiempo y recursos.,validation_run_enqueued; validation_run_started; validation_run_failed; validation_run_finished,Notificación por fallo o finalización (opcional),Integration: job orchestration; E2E: run from UI; Load tests,Runs son reproducibles; parámetros quedan capturados; resultados almacenados; fallos tienen logs accionables.,"RM-021,RM-022",BACKLOG,MVP v0.1,Quant/Backend
RM-024,Validación de algoritmo,Métricas de evaluación y scorecards,"El sistema deberá calcular métricas de evaluación (error, estabilidad, violaciones de constraints, uplift vs baseline) según el objetivo del cliente, con thresholds configurables para pass/fail.",Alta (P0),Quant; Analista; Viewer,Run Explorer > Scorecard; Dashboard > Validación (resumen),EvaluationMetric; Scorecard,evaluation_metrics; scorecards; thresholds,—,GET /validation-runs/{id}/scorecard; GET /scorecards/summary,—,Formulas versionadas; baseline explícito; thresholds por proyecto; tolerancias definidas.,scorecard_generated; threshold_updated,Notificación opcional cuando run FAIL,Unit: formulas; Integration: baseline compare; Snapshot tests UI,Scorecard incluye métricas + baseline + pass/fail; thresholds configurables; resultados se reflejan en dashboard y reportes.,"RM-023,RM-013",BACKLOG,MVP v0.1,Quant
RM-025,Validación de algoritmo,Diagnósticos y sensibilidad,"El sistema deberá generar diagnósticos para runs (p.ej. análisis de fallos, frecuencia de constraints activas, ablation/feature importance si aplica) y exportarlos en reporte técnico.",Media (P1),Quant; Analista,Run Explorer > Diagnósticos; Reporte (sección técnica),DiagnosticReport; FailureCase,diagnostic_reports; failure_cases,Object storage: diagnostics/,GET /validation-runs/{id}/diagnostics,—,"Si modelo no soporta feature importance, generar diagnóstico alternativo; capturar casos representativos.",diagnostics_generated,—,Integration: diag pipeline; Unit: summary builder,Diagnósticos identifican segmentos problemáticos; incluyen evidencia y parámetros; se pueden comparar entre runs.,"RM-023,RM-024",BACKLOG,v0.2,Quant
RM-026,Validación de algoritmo,What-if y parameter sweeps,"El sistema deberá permitir ejecutar batch de escenarios (fees ±x, imputación, distintos thresholds) y comparar resultados en una tabla/visualización única.",Media (P1),Quant; Analista,Run Explorer > Sweeps (tabla),Scenario; Sweep; ValidationRun,sweeps; sweep_scenarios; validation_runs,Object storage: sweep_outputs/,POST /sweeps; GET /sweeps/{id},Queue/worker,Validar rango de parámetros; límite de combinaciones; cancelación de sweeps.,sweep_created; sweep_started; sweep_completed; sweep_cancelled,Notificación al completar sweep (opcional),Integration: batch execution; Load tests,Se puede configurar y ejecutar un sweep sin scripting manual; resultados comparables y exportables; ejecución respetando límites.,RM-023,BACKLOG,v0.2,Quant/Backend
RM-027,Reportes,Plantillas y generación de reportes,"El sistema deberá generar reportes (HTML/PDF) a partir de plantillas con secciones: overview brokers, tablas de métricas, scorecards de validación, anomalías y appendix de metodología + versiones.",Alta (P0),Analista; Viewer; Admin,Reportes > Lista; Reporte > Vista,Report; ReportTemplate,reports; report_templates; report_sections,Object storage: reports/ (pdf/html),POST /reports/generate; GET /reports; GET /reports/{id},Template engine; Object storage,Validar template; timeouts; incluir versiones (parser/mapping/metric/algorithm); incluir fecha/hora.,report_generated; report_failed; report_downloaded,Entrega por link; email/webhook (opcional),E2E: generar y abrir; Unit: render sections; Performance: <60s para 100 brokers (configurable),Reporte se genera y es legible; incluye versiones y metodología; se puede descargar; coincide con dashboard para mismos filtros.,"RM-014,RM-024,RM-020",BACKLOG,MVP v0.1,Backend
RM-028,Reportes,Distribución programada,"El sistema deberá soportar generación y distribución programada de reportes (link seguro, email y/o webhook), con reintentos y alertas de falla.",Baja (P2),Admin; DevOps; Sistema,Admin > Distribución de reportes,ReportSchedule; DeliveryAttempt,report_schedules; report_deliveries,Object storage: reports/,POST/PUT /report-schedules; POST /reports/{id}/deliver,SMTP; Webhook; Scheduler,Validar destinatarios; expiración de links; firma/nonce; reintentos limitados.,report_delivery_attempted; report_delivery_failed; report_delivery_succeeded,Email/webhook a destinatarios; alerta a Admin si falla,Integration: SMTP/webhook; Unit: link signing,Reportes se entregan en schedule; fallas generan alertas; links requieren auth o token expirable.,"RM-027,RM-004,RM-034",BACKLOG,v0.3,Backend/DevOps
RM-029,Dashboard,Vistas core del dashboard,"El sistema deberá proveer dashboard con: lista de brokers + filtros, página detalle broker con charts, y resumen de validación del algoritmo; debe soportar drill-down a lineage.",Alta (P0),Viewer; Analista; Admin,Dashboard > Brokers; Dashboard > Broker; Dashboard > Validación,DashboardView; Filter; Chart,— (UI),—,GET /brokers; GET /brokers/{id}; GET /brokers/{id}/metrics; GET /scorecards/summary,Frontend SPA; API REST/GraphQL,Filtros deben coincidir entre UI y API; paginación; límites de consulta; control de permisos.,ui_view_accessed; filter_applied (opcional),—,E2E: flujos principales; UI tests; Performance: P95 <2s para consultas típicas,UI permite explorar brokers y métricas; drill-down funciona; permisos se respetan; tiempos de respuesta cumplen objetivos.,"RM-014,RM-017,RM-020,RM-033,RM-034",BACKLOG,MVP v0.1,Frontend
RM-030,Dashboard,Comparaciones y rankings,"El sistema deberá permitir comparación side-by-side de brokers y tablas de ranking con columnas configurables, ordenamiento y exportación.",Alta (P0),Viewer; Analista,Dashboard > Rankings; Dashboard > Comparar,ComparisonSet; RankingSnapshot,ranking_snapshots; comparison_sets (opcional),—,GET /rankings; GET /compare?broker_ids=...,Frontend SPA; API REST/GraphQL,Columnas permitidas; ordenar por metric+period; manejo determinístico de empates; coherencia con benchmarks.,comparison_created (opcional),—,E2E: comparar; Unit: ranking; Snapshot tests UI,"Usuarios pueden seleccionar brokers, comparar y ver ranking; descarga CSV coincide con lo mostrado; incluye completitud/anomalías.","RM-017,RM-032,RM-018,RM-019",BACKLOG,MVP v0.1,Frontend
RM-031,Dashboard,Explorador de runs/experimentos,"El sistema deberá proveer UI para explorar runs (filtros por versión, parámetros, fecha, estado) y comparar 2+ runs, mostrando diffs y scorecards.",Media (P1),Analista; Quant,Run Explorer (lista); Run Explorer (detalle); Comparar runs,ValidationRun; Experiment,—,—,GET /validation-runs; GET /validation-runs/{id}; GET /validation-runs/compare,Frontend SPA; API REST/GraphQL,Comparación sólo de runs compatibles (schema/dataset); paginación; redacción de logs sensibles.,run_viewed; run_compared (opcional),—,E2E: filtros; Unit: compatibilidad; UI tests,UI permite filtrar y abrir runs; comparación muestra diffs; scorecards visibles; logs accesibles con permisos.,"RM-023,RM-024,RM-034",BACKLOG,v0.2,Frontend
RM-032,Exportación,Exports de datos y resultados,"El sistema deberá exportar (CSV/JSON) registro de brokers, métricas y resultados de runs con metadatos de schema y unidades; exports grandes deben ser asíncronos.",Alta (P0),Analista; Admin,Dashboard > Exportar; Admin > Export jobs (opcional),ExportJob; ExportArtifact,export_jobs; export_artifacts,Object storage: exports/,POST /exports; GET /exports/{id}; GET /exports/{id}/download,Object storage; Queue/worker,Validar filtros; límite de tamaño; expiración de links; incluir schema_version; orden estable de columnas.,export_requested; export_generated; export_downloaded; export_failed,Notificación al terminar export (opcional),Integration: async jobs; E2E: export from UI; Security tests,Exports coinciden con filtros de UI; incluyen metadatos; enlaces seguros; exports grandes no bloquean UI.,"RM-010,RM-013,RM-034",BACKLOG,MVP v0.1,Backend
RM-033,Seguridad,Autenticación,"El sistema deberá requerir autenticación para dashboard, reportes y exports (email/password o SSO/OIDC), con sesiones seguras, CSRF donde aplique y políticas de password.",Alta (P0),Admin; Viewer; Analista,Login; Reset password; Perfil,User; Session,users; sessions; password_resets,—,POST /auth/login; POST /auth/logout; POST /auth/reset; GET /me,OIDC (opcional); SMTP (reset),Hash fuerte; rate-limit login; MFA opcional; sesiones con expiración; cookies secure/httpOnly.,auth_login_success; auth_login_failed; password_reset_requested,Email reset password; alertas de intentos sospechosos (opcional),Security tests; Unit: auth; Integration: OIDC; E2E: login flow,Acceso no autenticado es bloqueado; login/logout funcionan; sesiones expiran; eventos de seguridad quedan auditados.,—,BACKLOG,MVP v0.1,Backend/DevOps
RM-034,Seguridad,Autorización y roles (RBAC),"El sistema deberá implementar RBAC (Admin, Analista, Viewer) controlando: alta/edición brokers, ejecución runs, exports, cambios de políticas y acceso a auditorías.",Alta (P0),Admin; Analista; Viewer,Admin > Usuarios/Roles; UI restringida,Role; Permission; UserRole,roles; permissions; user_roles; role_permissions,—,GET/PUT /roles; POST /users/{id}/roles; policy enforcement en endpoints,—,Denegar por defecto; validar permisos por endpoint; no filtrar datos sensibles a roles no permitidos.,rbac_role_assigned; permission_denied,Notificación a Admin cuando cambian roles (opcional),Unit: permission matrix; Integration: endpoint guards; E2E: role scenarios,Acciones no autorizadas retornan 403; UI oculta acciones restringidas; logs de auditoría registran actor y outcome.,RM-033,BACKLOG,MVP v0.1,Backend/Frontend
RM-035,Seguridad,Gestión de secretos,"El sistema deberá gestionar secretos (API keys, SMTP, webhooks) fuera del repositorio (env/secret manager) y activar detección de secretos en CI.",Alta (P0),DevOps,—,SecretRef; Config,—,Secret manager / env vars,—,Secrets manager; CI secret scanning,Nunca persistir secretos en DB sin cifrado; rotación documentada; CI falla si detecta secretos.,secret_rotated (opcional); ci_secret_scan_failed,—,CI tests; secret scanning; manual rotation drill,Secret scanning pasa; no hay secretos en repo; procedimientos de rotación y rollback documentados.,RM-043,BACKLOG,MVP v0.1,DevOps
RM-036,Observabilidad,Logging estructurado con correlación,"El sistema deberá emitir logs estructurados (JSON) para ingesta, transformación, métricas y runs con correlation_id (run_id, broker_id, job_id) y niveles consistentes.",Alta (P0),DevOps; Backend,Admin > Logs (opcional),LogEvent,— (si logs externos),Log storage (ELK/Cloud),—,Log aggregator (ELK/Datadog),"Campos mínimos: timestamp, level, correlation_id, broker_id, event, error; no loggear PII/secrets.",log_emitted; log_redacted (opcional),Alertas sobre errores críticos (vía monitoreo),Integration: log pipeline; Unit: logger formatter,Se puede rastrear un run end-to-end por correlation_id; logs son consultables y no exponen secretos.,"RM-004,RM-023",BACKLOG,MVP v0.1,DevOps
RM-037,Observabilidad,Métricas y alertas operativas,"El sistema deberá exponer métricas (duración de jobs, tasa de éxito, errores de scraping, latencia API) y alertas por umbrales (p.ej. fallas >X%, retrasos).",Media (P1),DevOps; Admin,Admin > Monitoreo (opcional),ServiceMetric; AlertRule,alert_rules; alert_events (opcional),—,GET /health; GET /metrics (Prometheus),Prometheus/Grafana; Alertmanager,Definir umbrales; evitar alert fatigue; incluir runbooks.,alert_triggered; alert_resolved,Notificación a DevOps (Slack/email/webhook),Integration: metrics scrape; Alert tests; Chaos tests (opcional),Alertas disparan cuando umbrales se exceden; dashboard de métricas disponible; se reduce MTTR con runbooks.,RM-036,BACKLOG,v0.2,DevOps
RM-038,Performance,Throughput del pipeline,El sistema deberá procesar al menos 100 URLs end-to-end dentro de un SLA configurable (p.ej. <30 min) usando paralelismo sin violar rate limits por dominio.,Alta (P0),DevOps; Backend,—,PerformanceSLA,—,—,—,Load testing tooling,Respeta rate limits; controla concurrencia por dominio y global; degradación graciosa.,performance_test_run; sla_breached,Notificación si SLA se incumple (opcional),Load tests; benchmark suite; profiling,En dataset de referencia se cumple SLA; no se excede RPS; el sistema reporta progreso y cuellos de botella.,"RM-005,RM-004",BACKLOG,MVP v0.1,Backend/DevOps
RM-039,Performance,Responsividad del dashboard,"El sistema deberá mantener interacciones del dashboard con P95 <2s para consultas típicas y <10s para consultas pesadas, mostrando indicador de progreso si aplica.",Media (P1),Frontend; Backend,Dashboard (todas),—,—,—,Optimización: caching/materialized views,Índices DB; caché; paginación,Evitar consultas sin límite; paginación; cache invalidation; límites de rango temporal.,slow_query_logged,—,Performance tests; UI profiling; DB query analysis,Las consultas cumplen P95; UI permanece usable; consultas pesadas muestran progreso; no hay timeouts frecuentes.,"RM-029,RM-017",BACKLOG,v0.2,Backend/Frontend
RM-040,Reproducibilidad,Versionado end-to-end de componentes,"El sistema deberá versionar y relacionar parsers, mapeos, definiciones de métricas, datasets y builds del algoritmo, y asociarlos a cada run y reporte.",Alta (P0),Quant; Backend,Run Explorer > Versiones; Reporte > Appendix,VersionRef; ComponentVersion,component_versions; run_component_versions; report_component_versions,Object storage: artifacts/ (si aplica),GET /versions; GET /validation-runs/{id}/versions,—,Cada run/reporte debe tener conjunto completo de versiones; no permitir run sin version refs.,component_version_registered; run_version_pinned,—,Unit: version graph; Integration: run captures versions,Se puede reconstruir exactamente el estado de un run/reporte seleccionando las mismas versiones; UI muestra versiones claramente.,"RM-009,RM-011,RM-013,RM-021,RM-022",BACKLOG,MVP v0.1,Backend/Quant
RM-041,Testing,Suite de unit/integration/E2E,"El sistema deberá incluir pruebas automáticas para parsers, transformaciones, métricas y runner del algoritmo. Debe usar fixtures grabadas (no depender de sitios live) y seguir enfoque RED/GREEN.",Alta (P0),Backend; Quant; Frontend,—,TestFixture,—,Fixture storage (repo o bucket),—,CI,Fixtures versionadas; tests determinísticos; coverage targets; separar unit vs integration.,ci_test_passed; ci_test_failed,—,Unit; Integration; E2E; Golden tests; Coverage report,CI ejecuta tests en cada PR; fixtures evitan flakiness; regresiones se detectan antes de deploy.,"RM-006,RM-013,RM-023",BACKLOG,MVP v0.1,All
RM-042,Testing,Data contract tests (schemas),El sistema deberá aplicar data contracts entre extracción→normalización→dataset→algoritmo (schemas versionados) y fallar CI ante cambios rompientes.,Alta (P0),Backend; Quant,—,SchemaContract,schema_versions; contract_checks (opcional),—,—,CI; Schema registry (opcional),Validación de schema; migraciones obligatorias; compatibilidad hacia atrás donde aplique.,contract_check_failed; schema_version_bumped,—,Contract tests; Migration tests; Backward-compat tests,Cambios rompientes bloquean merge; dataset builder rechaza inputs incompatibles con error claro.,"RM-010,RM-022,RM-021",BACKLOG,MVP v0.1,Backend
RM-043,DevOps,CI/CD + migraciones + rollback,"El sistema deberá contar con CI/CD para build, tests, deploy y migraciones DB, con promoción de ambientes (dev/stage/prod) y procedimiento de rollback probado.",Alta (P0),DevOps,—,Deployment; Migration,—,Artifact registry; IaC state,—,GitHub Actions/GitLab CI; Container registry; IaC,Bloquear merges sin CI green; migrations idempotentes; rollback documentado; environment config segregada.,deployment_started; deployment_succeeded; deployment_failed; rollback_executed,Notificación a DevOps en deploy/rollback (Slack/email),Pipeline tests; smoke tests post-deploy; rollback drill,Deploy reproducible; migraciones aplican correctamente; rollback recupera servicio; evidencias en logs/auditoría.,"RM-041,RM-035",BACKLOG,MVP v0.1,DevOps
RM-044,Gobernanza de datos,Retención y archivado,"El sistema deberá definir políticas de retención para raw_records, snapshots, outputs de runs, logs y reportes (purga/archivado) sin dejar referencias huérfanas.",Media (P1),Admin; DevOps,Admin > Retención (opcional),RetentionPolicy,retention_policies; retention_jobs,Object storage tiers (cold/hot),PUT /retention/policy; POST /retention/run,Object storage lifecycle; DB jobs,No borrar si hay dependencia legal/contractual; archivar antes de purgar; confirmación para purgas masivas.,retention_policy_updated; retention_job_executed,Notificación cuando retención purga/archiva (opcional),Integration: lifecycle rules; Unit: referential checks,Datos se archivan/purgan según política; no hay huérfanos; reportes/runs siguen consistentes o quedan marcados como archived.,"RM-009,RM-023,RM-027",BACKLOG,v0.2,Backend/DevOps
RM-045,Gobernanza,Bitácora de auditoría de acciones críticas,"El sistema deberá registrar eventos de auditoría para: cambios de brokers/URLs, ejecuciones de runs, exports, cambios de roles, cambios de políticas, y accesos a reportes/lineage.",Alta (P0),Admin,Admin > Auditoría,AuditEvent,audit_events,—,GET /audit-events; GET /audit-events?filter=...,—,"Append-only; incluir actor, timestamp, acción, objeto, outcome; no editable; retención configurable.",audit_event_created,—,Integration: audit middleware; Unit: event builder,Auditoría cubre eventos críticos; filtros funcionan; evidencia suficiente para investigación; RBAC protege acceso.,RM-034,BACKLOG,MVP v0.1,Backend
RM-046,UX,Transparencia de errores y remediación,"El sistema deberá mostrar errores claros y accionables (parser roto, dominio bloqueado, datos insuficientes, run fallido), con pasos sugeridos y links a evidencia (logs/lineage).",Media (P1),Viewer; Analista; Admin,Dashboard (estados); Run Explorer (errores); Broker detail,ErrorState; RemediationHint,—,—,—,—,Mensajes no técnicos para usuarios; detalles técnicos detrás de permisos; códigos de error consistentes.,ui_error_displayed (opcional),—,E2E: failure scenarios; UI tests; Copy review,Usuario entiende por qué faltan métricas o falla un run; puede navegar a evidencia; se reduce tickets de soporte.,"RM-019,RM-036,RM-020",BACKLOG,v0.2,Frontend
RM-047,Privacidad,Minimización y redacción de datos,El sistema deberá almacenar sólo campos necesarios y permitir redacción/omisión de campos sensibles (si aparecen) en salidas (dash/report/export) según política.,Baja (P2),Admin; DevOps,Admin > Privacidad (opcional),RedactionRule,redaction_rules; redaction_events,Object storage (si aplica) con cifrado,PUT /privacy/redaction-rules; GET /privacy/status,Encryption at rest; KMS (opcional),Reglas explícitas; no exponer PII/secrets en logs; RBAC.,redaction_rule_updated; redaction_applied,Notificación a Admin si se detecta PII (opcional),Security tests; Unit: redaction; Integration: export/report redaction,Campos marcados se ocultan/redactan en UI/report/export; logs no contienen PII; cumplimiento de política verificado.,"RM-036,RM-032",BACKLOG,v0.3,Backend/DevOps
RM-048,Documentación,Docs técnicas y operativas,"El sistema deberá incluir documentación: setup local, despliegue, runbooks, catálogo de métricas, cómo agregar un nuevo dominio/adaptador y cómo ejecutar validación del algoritmo.",Alta (P0),All,—,—,—,Docs en repo (Markdown),—,—,Docs versionadas; ejemplos reproducibles; diagramas del pipeline; checklist de release.,docs_updated,—,Docs review; Doctests (opcional),Nuevo integrante puede levantar el sistema y correr pipeline en <1 día; runbooks permiten diagnosticar fallas comunes.,RM-043,BACKLOG,MVP v0.1,All
RM-049,Extensibilidad,Onboarding de nuevo dominio/fuente,El sistema deberá ofrecer un proceso estándar (template de adapter + mapping + fixtures + tests) para agregar un nuevo dominio en <=1 día para un sitio típico.,Media (P1),Backend; Quant,Admin > Dominios (opcional),SourceAdapter; MappingRuleSet,source_adapters; mapping_rule_sets,Fixture storage,—,—,Template con checklist; fixtures obligatorias; CI debe pasar; soporte de versionado.,new_adapter_added; adapter_published,—,Template-based tests; Integration: new adapter pipeline,Se agrega un dominio nuevo siguiendo plantilla; tests y fixtures incluidos; pasa CI; métricas core se calculan o se marca insuficiente con explicación.,"RM-006,RM-011,RM-041",BACKLOG,v0.2,Backend
RM-050,Entregables,Criterio de aceptación del MVP,"El MVP deberá incluir: registro de brokers+URLs, scheduler, extracción+normalización, métricas core, dashboard básico, construcción de dataset, ejecución de runs, scorecard, y generación de reportes con versionado/lineage.",Alta (P0),PM; Admin; Analista,Dashboard; Run Explorer; Reportes; Admin,Release; MVPChecklist,—,—,—,—,Checklist de funcionalidades; datos de demo; SLAs mínimos; seguridad básica (auth+RBAC).,mvp_gate_passed; mvp_gate_failed,—,E2E demo; smoke tests; UAT checklist,"Demo end-to-end con 50+ brokers: ingesta ok, dashboard usable, reporte generado, run ejecutado y guardado; scorecards visibles; lineage disponible; RBAC activo.",RM-001..RM-049,BACKLOG,MVP v0.1,PM/All